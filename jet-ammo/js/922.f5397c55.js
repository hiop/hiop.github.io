"use strict";(self["webpackChunkae_web_tool"]=self["webpackChunkae_web_tool"]||[]).push([[922],{1922:(e,t,a)=>{a.r(t),a.d(t,{default:()=>I});var l=a(3673);function r(e,t,a,r,o,n){const i=(0,l.up)("example-component"),m=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(m,null,{default:(0,l.w5)((()=>[(0,l.Wm)(i,{title:"Example component",active:"",todos:e.todos,meta:e.meta},null,8,["todos","meta"])])),_:1})}var o=a(2323);const n={key:0},i=(0,l.Uk)(" Requires two files to work "),m=(0,l._)("br",null,null,-1),s=(0,l._)("br",null,null,-1),c=(0,l._)("div",{class:"text-border"},"server\\db\\items\\Ammo.json (for ammo)",-1),d=(0,l._)("br",null,null,-1),u=(0,l._)("div",{class:"text-border"},"server\\db\\locales\\%LANG%\\template.json (for locales, ru,en,fr...)",-1),g=(0,l._)("br",null,null,-1),p=[i,m,s,c,d,u,g],b=(0,l._)("br",null,null,-1);function f(e,t,a,r,i,m){const s=(0,l.up)("q-btn"),c=(0,l.up)("q-uploader"),d=(0,l.up)("q-icon"),u=(0,l.up)("q-input"),g=(0,l.up)("q-td"),f=(0,l.up)("q-table"),h=(0,l.up)("q-card-section"),w=(0,l.up)("q-card");return(0,l.wg)(),(0,l.j4)(w,{style:{width:"100%",height:"100%",padding:"5px",margin:"5px"},flat:""},{default:(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[e.validData?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("span",n,p)),e.validData?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l.Wm)(s,{color:"red",label:"RESET DATA",onClick:e.resetData},null,8,["onClick"]),b],64)):((0,l.wg)(),(0,l.j4)(c,{key:2,color:"teal",label:"Ammo.json and template.json",multiple:"",flat:"",bordered:"",style:{"max-width":"300px",margin:"5px"},onAdded:e.fileAdded,accept:"application/json","hide-upload-btn":""},null,8,["onAdded"])),e.validData?((0,l.wg)(),(0,l.iD)(l.HY,{key:3},[(0,l.Wm)(s,{color:"secondary",label:"ALL",key:"all-caliber",style:{margin:"5px"},onClick:t[0]||(t[0]=t=>e.setFilter(""))}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.calibers,(t=>((0,l.wg)(),(0,l.j4)(s,{color:"secondary",label:t,key:t,style:{margin:"5px"},onClick:a=>e.setFilter(t)},null,8,["label","onClick"])))),128)),(0,l.Wm)(u,{outlined:"",dense:"",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t),placeholder:"Search",style:{margin:"5px"}},{append:(0,l.w5)((()=>[(0,l.Wm)(d,{name:"search"})])),_:1},8,["modelValue"]),(0,l.Wm)(f,{class:"my-sticky-column-table",style:{margin:"5px"},filter:e.filter,dense:"",rows:e.ammunitionShort,columns:e.ammunitionColumn,"row-key":"name","rows-per-page-options":"0"},{"body-cell-armor1":(0,l.w5)((t=>[(0,l.Wm)(g,{key:t.key,class:(0,o.C_)(e.getClassByPenetrationPoint(t.row[t.col.field]))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.row[t.col.field]),1)])),_:2},1032,["class"])])),"body-cell-armor2":(0,l.w5)((t=>[(0,l.Wm)(g,{key:t.key,class:(0,o.C_)(e.getClassByPenetrationPoint(t.row[t.col.field]))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.row[t.col.field]),1)])),_:2},1032,["class"])])),"body-cell-armor3":(0,l.w5)((t=>[(0,l.Wm)(g,{key:t.key,class:(0,o.C_)(e.getClassByPenetrationPoint(t.row[t.col.field]))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.row[t.col.field]),1)])),_:2},1032,["class"])])),"body-cell-armor4":(0,l.w5)((t=>[(0,l.Wm)(g,{key:t.key,class:(0,o.C_)(e.getClassByPenetrationPoint(t.row[t.col.field]))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.row[t.col.field]),1)])),_:2},1032,["class"])])),"body-cell-armor5":(0,l.w5)((t=>[(0,l.Wm)(g,{key:t.key,class:(0,o.C_)(e.getClassByPenetrationPoint(t.row[t.col.field]))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.row[t.col.field]),1)])),_:2},1032,["class"])])),"body-cell-armor6":(0,l.w5)((t=>[(0,l.Wm)(g,{key:t.key,class:(0,o.C_)(e.getClassByPenetrationPoint(t.row[t.col.field]))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.row[t.col.field]),1)])),_:2},1032,["class"])])),_:1},8,["filter","rows","columns"])],64)):(0,l.kq)("",!0)])),_:1})])),_:1})}var h=a(5777),w=a(1959),v=a(7691),y=function(e,t,a,l){var r,o=arguments.length,n=o<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,a):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,l);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(o<3?r(n):o>3?r(t,a,n):r(t,a))||n);return o>3&&n&&Object.defineProperty(t,a,n),n};let P=class extends h.w3{constructor(){super(...arguments),Object.defineProperty(this,"ammunition",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"calibers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"visibleColumns",{enumerable:!0,configurable:!0,writable:!0,value:(0,w.iH)(["damage","armorDamage"])}),Object.defineProperty(this,"ammunitionShort",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"ammunitionColumn",{enumerable:!0,configurable:!0,writable:!0,value:[{name:"name",label:"Name",field:"name",sortable:!0,style:"width: 200px"},{name:"caliber",label:"Caliber",field:"caliber",sortable:!0},{name:"damage",align:"center",label:"Damage",field:"damage",sortable:!0},{name:"armorDamage",align:"center",label:"Armor Damage",field:"armorDamage",sortable:!0},{name:"ricochet",align:"center",label:"Ricochet %",field:"ricochet",sortable:!0},{name:"fragmentation",align:"center",label:"Fragmentation %",field:"fragmentation",sortable:!0},{name:"recoil",align:"center",label:"Recoil",field:"ammoRec",sortable:!0},{name:"penetration",align:"center",label:"Armor Penetration",field:"penetration",sortable:!0},{name:"armor1",label:"1",align:"center",field:"armor1",sortable:!0},{name:"armor2",label:"2",align:"center",field:"armor2",sortable:!0},{name:"armor3",label:"3",align:"center",field:"armor3",sortable:!0},{name:"armor4",label:"4",align:"center",field:"armor4",sortable:!0},{name:"armor5",label:"5",align:"center",field:"armor5",sortable:!0},{name:"armor6",label:"6",align:"center",field:"armor6",sortable:!0}]})}onJsonLoaded(){console.log("ammunition or template loaded"),this.ammunitionShort.length||this.ammunition.length&&Object.keys(this.template).length&&this.ammunition.forEach((e=>{let t=this.getCaliber(e),a={name:this.getLocaleName(e),caliber:this.getCaliber(e),damage:this.getDamage(e),armorDamage:this.getArmorDamage(e),penetration:this.getPenetrationPower(e),ricochet:this.getRicochetChance(e),fragmentation:this.getFragmentationChance(e),ammoRec:this.getAmmoRec(e),armor1:this.getFormattedPenetrationPowerByArmorClass(e,1),armor2:this.getFormattedPenetrationPowerByArmorClass(e,2),armor3:this.getFormattedPenetrationPowerByArmorClass(e,3),armor4:this.getFormattedPenetrationPowerByArmorClass(e,4),armor5:this.getFormattedPenetrationPowerByArmorClass(e,5),armor6:this.getFormattedPenetrationPowerByArmorClass(e,6)};-1===this.calibers.indexOf(t)&&this.calibers.push(t),this.ammunitionShort.push(a)}))}get validData(){return this.ammunition.length&&Object.keys(this.template).length}resetData(){this.ammunition=[],this.template={},this.ammunitionShort=[],localStorage.setItem("ammunition","[]"),localStorage.setItem("template","{}")}setFilter(e){this.filter=e}getCaliber(e){var t,a;let l=null!==(a=null===(t=e._props)||void 0===t?void 0:t.Caliber)&&void 0!==a?a:"???";return l.replace("Caliber","")}getCaliberV2(e){let t=null===e||void 0===e?void 0:e._name;return t?null===t||void 0===t?void 0:t.split("_")[1]:"???"}getLocaleName(e){var t;return e._id&&null!==(t=this.template[e._id].Name)&&void 0!==t?t:e._name}getArmorDamage(e){var t,a;return null!==(a=null===(t=e._props)||void 0===t?void 0:t.ArmorDamage)&&void 0!==a?a:"???"}getDamage(e){var t,a;return null!==(a=null===(t=e._props)||void 0===t?void 0:t.Damage)&&void 0!==a?a:"???"}getPenetrationPower(e){var t,a;return null!==(a=null===(t=e._props)||void 0===t?void 0:t.PenetrationPower)&&void 0!==a?a:"???"}getAmmoRec(e){var t,a;return null!==(a=null===(t=e._props)||void 0===t?void 0:t.ammoRec)&&void 0!==a?a:"???"}getFragmentationChance(e){var t,a;return(null===(t=e._props)||void 0===t?void 0:t.FragmentationChance)?(100*(null===(a=e._props)||void 0===a?void 0:a.FragmentationChance)).toFixed():"???"}getRicochetChance(e){var t,a;return(null===(t=e._props)||void 0===t?void 0:t.RicochetChance)?(100*(null===(a=e._props)||void 0===a?void 0:a.RicochetChance)).toFixed():"???"}getClassByPenetrationPoint(e){let t="string"===typeof e?parseInt(e):e;if(!isNaN(t))return t>=5?"full-penetration":t>=4?"mid-penetration":t>=2?"average-penetration":"bad-penetration"}getFormattedPenetrationPowerByArmorClass(e,t){let a=this.getPenetrationPower(e),l=5;if("string"===typeof a)return"???";let r=a/10-t;return r>=0?l:r>-.2?5:r>-.4?4:r>-.75?3:r>-.85?2:r>-.91?1:r<=-.95?0:"???"}fileAdded(e){e.forEach((e=>{let t=new FileReader;t.readAsText(e,"UTF-8"),"Ammo.json"===e.name&&(t.onload=e=>{var t;if(!(null===(t=null===e||void 0===e?void 0:e.target)||void 0===t?void 0:t.result))return;let a=JSON.parse(e.target.result);a.sort(((e,t)=>{let a=this.getPenetrationPower(e),l=this.getPenetrationPower(t);return a<l?1:a>l?-1:0})),this.ammunition=a,localStorage.setItem("ammunition",JSON.stringify(this.ammunition)),console.log("this.ammunition",this.ammunition.length)}),"templates.json"===e.name&&(t.onload=e=>{var t;(null===(t=null===e||void 0===e?void 0:e.target)||void 0===t?void 0:t.result)&&(this.template=JSON.parse(e.target.result),localStorage.setItem("template",JSON.stringify(this.template)))})}))}mounted(){let e=localStorage.getItem("ammunition"),t=localStorage.getItem("template");e&&(this.ammunition=JSON.parse(e),console.log("this.ammunition",this.ammunition.length)),t&&(this.template=JSON.parse(t))}};y([(0,v.RL)("ammunition"),(0,v.RL)("template")],P.prototype,"onJsonLoaded",null),P=y([(0,h.Ei)({})],P);const C=P;var _=a(151),k=a(5589),j=a(4607),A=a(5252),D=a(4842),O=a(4554),R=a(4651),x=a(3884),S=a(7518),F=a.n(S);C.render=f;const B=C;F()(C,"components",{QCard:_.Z,QCardSection:k.Z,QBtn:j.Z,QUploader:A.Z,QInput:D.Z,QIcon:O.Z,QTable:R.Z,QTd:x.Z});var N=function(e,t,a,l){var r,o=arguments.length,n=o<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,a):l;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)n=Reflect.decorate(e,t,a,l);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(n=(o<3?r(n):o>3?r(t,a,n):r(t,a))||n);return o>3&&n&&Object.defineProperty(t,a,n),n};let W=class extends h.w3{constructor(){super(...arguments),Object.defineProperty(this,"todos",{enumerable:!0,configurable:!0,writable:!0,value:[{id:1,content:"ct1"},{id:2,content:"ct2"},{id:3,content:"ct3"},{id:4,content:"ct4"},{id:5,content:"ct5"}]}),Object.defineProperty(this,"meta",{enumerable:!0,configurable:!0,writable:!0,value:{totalCount:1200}})}};W=N([(0,h.Ei)({components:{ExampleComponent:B}})],W);const q=W;var U=a(4379);q.render=r;const I=q;F()(q,"components",{QPage:U.Z})}}]);